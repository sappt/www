<!DOCTYPE html>
<html lang="ko">
<head>
	<!-- Global site tag (gtag.js) - Google Analytics  --  START -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135186223-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-135186223-1');
	</script>
	<!-- Global site tag (gtag.js) - Google Analytics  --  END -->


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>샤프트리서치 - 지속가능한 농업과 식물보호기술 연구소</title>

    <!-- SEO 메타 태그 -->
    <meta name="description" content="샤프트리서치(SAPPT Research)는 기후변화에 대응하는 식물보호 기술 개발과 안전한 농산물 생산을 위한 전문 연구소입니다. 병해충 관리, 작물보호제 안전성 연구를 수행합니다.">
    <meta name="keywords" content="샤프트리서치, SAPPT, 식물보호, 농업연구, 병해충, 작물보호제, 농산물안전, 식물병해충, 농업기술">
    <meta name="author" content="샤프트리서치">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.sappt.co.kr/">

    <!-- Open Graph (Facebook, KakaoTalk 등) -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="샤프트리서치 - 지속가능한 농업과 식물보호기술 연구소">
    <meta property="og:description" content="기후변화에 대응하는 식물보호 기술 개발과 안전한 농산물 생산을 위한 전문 연구소">
    <meta property="og:url" content="https://www.sappt.co.kr/">
    <meta property="og:image" content="https://www.sappt.co.kr/assets/img/sappt01.png">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="샤프트리서치">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="샤프트리서치 - 지속가능한 농업과 식물보호기술 연구소">
    <meta name="twitter:description" content="기후변화에 대응하는 식물보호 기술 개발과 안전한 농산물 생산을 위한 전문 연구소">
    <meta name="twitter:image" content="https://www.sappt.co.kr/assets/img/sappt01.png">

	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
	<!-- favicon추가 -->
    <link rel="shortcut icon" href="assets/ico/sappt.ico" type="image/x-icon">
	<link rel="icon"          href="assets/ico/sappt.ico" type="image/x-icon">

	<!-- jqgrid  --  START -->
    <!-- The jQuery library is a prerequisite for all jqSuite products -->
    <script type="text/ecmascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
    <!-- This is the Javascript file of jqGrid -->   
    <script type="text/ecmascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/5.5.1/js/jquery.jqGrid.min.js"></script>
    <!-- This is the localization file of the grid controlling messages, labels, etc. -->
    <!-- We support more than 40 localizations --> 
    <script type="text/ecmascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/5.4.0/js/i18n/grid.locale-kr.js"></script>
    <!-- A link to a jQuery UI ThemeRoller theme, more than 22 built-in and many more custom -->
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />
    <!-- The link to the CSS that the grid needs -->
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/5.5.1/css/ui.jqgrid.min.css" />

 	<!-- http://www.guriddo.net/demo/guriddojs/  -->
	<!-- jqgrid  --  END -->

	<!-- wordcloud2.js 라이브러리 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.1.1/wordcloud2.min.js"></script>

	<!-- 구조화된 데이터 (JSON-LD) -->
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "Organization",
		"name": "샤프트리서치",
		"alternateName": "SAPPT Research",
		"url": "https://www.sappt.co.kr",
		"logo": "https://www.sappt.co.kr/assets/img/sappt01.png",
		"description": "기후변화에 대응하는 식물보호 기술 개발과 안전한 농산물 생산을 위한 전문 연구소",
		"address": {
			"@type": "PostalAddress",
			"streetAddress": "양지면 남평로 326번길 28",
			"addressLocality": "용인시 처인구",
			"addressRegion": "경기도",
			"postalCode": "17163",
			"addressCountry": "KR"
		},
		"contactPoint": {
			"@type": "ContactPoint",
			"telephone": "+82-31-336-3973",
			"faxNumber": "+82-31-336-3972",
			"email": "sappt@sappt.co.kr",
			"contactType": "customer service"
		},
		"sameAs": []
	}
	</script>

</head>

<body>
	<script type="text/javascript">

		// 전역 데이터 저장소 (검색 후에도 상세보기가 동작하도록)
		var gridDataMap = {};  // JSON id → 데이터 맵
		var originalData = [];
		var jsonUrl = 'https://www.sappt.co.kr/assets/json/sapptSicknessDic.json';

		$(document).ready(function () {

			// 먼저 JSON을 로드하여 전역 맵 생성
			$.getJSON(jsonUrl, function(response) {
				var data = response.rows || response;
				originalData = data.slice();

				// id를 키로 맵 생성
				originalData.forEach(function(row) {
					if (row.id) {
						gridDataMap[row.id] = row;
					}
				});
				console.log('gridDataMap 생성 완료:', Object.keys(gridDataMap).length + '개');

				// jqGrid 초기화
				$("#jqGrid").jqGrid({
					data: originalData,
					datatype: "local"
					,colNames00000 : ['제목','Contents','File','FileUrl' ]
					,colModel: [
					     { label: '제목', name: 'TitleName' }
						,{ label: '파일', name: 'FileUrl', width: 20,align : 'center',formatter: fileIcon }
						,{ label: '상세', name: 'detail', width: 20, align: 'center', formatter: detailIcon, sortable: false }
					]
					,viewrecords: false
					//,autowidth: true
					//,width : 500
					,height: 200
					,rowNum: 999999
					,loadonce: true
					,rownumbers : true
					,rownumWidth : 25
					,pager: "#jqGridPager"
				});

				resizeJqGridWidth('jqGrid', 'gridContainer', $('#gridContainer').width(), true);

				// 워드클라우드 생성
				generateWordCloud(originalData);
			});

			// 워드클라우드 생성 함수
			function generateWordCloud(data) {
				// 키워드 추출 및 빈도수 계산
				var wordCount = {};

				// 제외할 단어 리스트
                var excludeWords = ['살충제', '살균제', '제초제', '등록약제','대조약제','약제제형','이듬해','불량해','수용제', '수화제', '입상수용제', '입상수화제', '미탁제', '분산성액제', '액상수화제', '액제', '유제', '유상수화제', '유탁제', '유현탁제', '입제', '과립훈연제', '도포제', '세립제', '분제', '종자처리수화제', '캡슐현탁제', '훈연제', '대립제', '직접살포정제'];

				// 불용어 리스트
				var stopWords = ['등', '및', '의', '에', '를', '이', '가', '는', '은', '에서', '으로', '로', '과', '와', '수', '때', '후', '중', '내', '외', '전', '상', '하', '좀', '더', '잘', '것', '경우', '정도', '이상', '이하', '또는', '그리고', '하여', '되어', '있다', '없다', '한다', '된다', '있는', '없는', '하는', '되는', '위해', '통해', '따라', '대한', '관한'];

				// 제외 단어와 불용어 합치기
				var allExcludeWords = stopWords.concat(excludeWords);

				data.forEach(function(row) {
					// title에서 키워드 추출
					if (row.title) {
						var titleWords = row.title.replace(/\([^)]*\)/g, '').trim().split(/\s+/);
						titleWords.forEach(function(word) {
							word = word.trim();
							if (word.length >= 2 && allExcludeWords.indexOf(word) === -1) {
								wordCount[word] = (wordCount[word] || 0) + 3; // 제목은 가중치 3
							}
						});
					}

					// category에서 키워드 추출
					if (row.category) {
						var cat = row.category.trim();
						if (cat.length >= 2 && allExcludeWords.indexOf(cat) === -1) {
							wordCount[cat] = (wordCount[cat] || 0) + 2; // 분류는 가중치 2
						}
					}

					// summary에서 주요 키워드 추출 (병원균, 품종, 약제 등)
					if (row.summary) {
						// 병원균 추출
						var pathogenMatch = row.summary.match(/병원균[:\s]*([^-]+)/);
						if (pathogenMatch) {
							var pathogens = pathogenMatch[1].split(/[,、]/);
							pathogens.forEach(function(p) {
								p = p.trim().split(/\s+/)[0]; // 첫 단어만
								if (p.length >= 2 && allExcludeWords.indexOf(p) === -1) {
									wordCount[p] = (wordCount[p] || 0) + 1;
								}
							});
						}

						// 주요 단어 추출 (2글자 이상 한글 명사)
						var keywords = row.summary.match(/[가-힣]{2,}[병균충해제]+/g);
						if (keywords) {
							keywords.forEach(function(word) {
								if (word.length >= 2 && word.length <= 10 && allExcludeWords.indexOf(word) === -1) {
									wordCount[word] = (wordCount[word] || 0) + 1;
								}
							});
						}
					}
				});

				// 빈도수 기준 정렬 및 상위 100개 선택
				var wordList = Object.keys(wordCount).map(function(word) {
					return [word, wordCount[word]];
				}).sort(function(a, b) {
					return b[1] - a[1];
				}).slice(0, 100);

				console.log('워드클라우드 키워드:', wordList.slice(0, 20));

				// 캔버스 크기 설정
				var container = document.getElementById('wordcloudContainer');
				var canvas = document.getElementById('wordcloudCanvas');
				canvas.width = container.offsetWidth;
				canvas.height = container.offsetHeight;

				// 워드클라우드 생성
				WordCloud(canvas, {
					list: wordList,
					gridSize: 8,
					weightFactor: function(size) {
						return Math.pow(size, 0.8) * 3;
					},
					fontFamily: 'Malgun Gothic, 맑은 고딕, sans-serif',
					color: function(word, weight) {
						var colors = ['#337ab7', '#5cb85c', '#f0ad4e', '#d9534f', '#5bc0de', '#777'];
						return colors[Math.floor(Math.random() * colors.length)];
					},
					rotateRatio: 0.3,
					rotationSteps: 2,
					backgroundColor: '#f9f9f9',
					click: function(item) {
						// 워드클라우드 클릭 시 해당 키워드로 검색
						$('#gridSearch').val(item[0]).trigger('keyup');
					}
				});
			}

			// 검색 기능 (검색대상: 제목, 병명, 분류, 설명)
			$('#gridSearch').on('keyup', function() {
				var searchText = $(this).val().toLowerCase();
				var grid = $("#jqGrid");

				if (searchText === '') {
					grid.jqGrid('clearGridData').jqGrid('setGridParam', { data: originalData }).trigger('reloadGrid');
				} else {
					var filteredData = originalData.filter(function(row) {
						var 제목 = row.TitleName ? row.TitleName.toLowerCase() : '';
						var 병명 = row.title ? row.title.toLowerCase() : '';
						var 분류 = row.category ? row.category.toLowerCase() : '';
						var 설명 = row.summary ? row.summary.toLowerCase() : '';

						return 제목.indexOf(searchText) > -1 ||
							   병명.indexOf(searchText) > -1 ||
							   분류.indexOf(searchText) > -1 ||
							   설명.indexOf(searchText) > -1;
					});
					grid.jqGrid('clearGridData').jqGrid('setGridParam', { data: filteredData }).trigger('reloadGrid');
				}
			});


			function fileIcon(cellValue, options, rowObject) {
			 var pdfIconPath = "https://user-images.githubusercontent.com/47404350/107627749-14d67480-6ca3-11eb-9dcb-de1c3aa1fb23.png";
			 var jpgIconPath = "https://user-images.githubusercontent.com/47404350/107630755-59fca580-6ca7-11eb-830f-61535ddeb797.png";

			 var imageHtml = "";

			if ( cellValue.slice(-4, cellValue.length).toUpperCase() == ".PDF" ) {
			   imageHtml = "<a href='"+cellValue+"' target='_blank'><img src='"+ pdfIconPath +"' alt='PDF 파일 다운로드' /></a>";
			} else if ( cellValue.slice(-4, cellValue.length).toUpperCase() == ".JPG"  ) {
			   imageHtml = "<a href='"+cellValue+"' target='_blank'><img src='"+ jpgIconPath +"' alt='이미지 파일 보기' /></a>";
			} else {
			   imageHtml = "<a href='"+cellValue+"' target='_blank'><img src='"+ jpgIconPath +"' alt='파일 보기' /></a>";
			}

			 return imageHtml;
			}

			function detailIcon(cellValue, options, rowObject) {
				// JSON의 id를 사용하여 전역 맵에서 데이터 조회
				var dataId = rowObject.id || '';
				console.log('detailIcon - rowObject:', rowObject, 'id:', dataId);  // 디버깅
				return "<a href='javascript:void(0);' onclick='showDetailModal(\"" + dataId + "\")' style='cursor:pointer;' title='상세보기'><i class='fa fa-search-plus' style='font-size:18px;color:#337ab7;'></i></a>";
			}


			/*
			* @param string grid_id 사이즈를 변경할 그리드의 아이디
			* @param string div_id 그리드의 사이즈의 기준을 제시할 div 의 아이디
			* @param string width 그리드의 초기화 width 사이즈
			* @param boolean tf 그리드의 리사이즈 여부(true/false)
			*/
			function resizeJqGridWidth(grid_id, div_id, width, tf){
				//alert('1/'+width+"/"+ $('#gridContainer').width() );
				// window에 resize 이벤트를 바인딩 한다. 
				$(window).bind('resize', function() {
				var resizeWidth = $('#gridContainer').width()-33; //jQuery-ui의 padding 설정 및 border-width값때문에 넘치는 걸 빼줌.
					// 그리드의 width 초기화
					$('#' + grid_id).setGridWidth( resizeWidth, tf);
					// 그리드의 width를 div 에 맞춰서 적용
					$('#' + grid_id).setGridWidth( resizeWidth , tf); //Resized to new width as per window. 
				}).trigger('resize');
			}

			
	
			//$(window).resize(function(){
               //$("#jqGrid").setGridWidth($(this).width() * .90);//grid는 창 전체크기의 %
            //});
	
		});

		function showDetailModal(dataId) {
			console.log('showDetailModal - dataId:', dataId, 'gridDataMap:', gridDataMap);  // 디버깅
			// 전역 맵에서 ID로 데이터 조회
			var rowData = gridDataMap[dataId];

			if (!rowData) {
				alert('데이터를 찾을 수 없습니다. (id: ' + dataId + ')');
				return;
			}

			$('#modal-title').text(rowData.title || '-');
			$('#modal-category').text(rowData.category || '-');

			// summary에서 ' - ' 앞에 줄바꿈 처리
			var summary = rowData.summary || '-';
			summary = summary.replace(/ - /g, '\n- ');
			$('#modal-summary').text(summary);

			var fileUrl = rowData.FileUrl || '';
			if (fileUrl) {
				$('#modal-fileurl').html("<a href='" + fileUrl + "' target='_blank' title='이미지 보기'><i class='fa fa-file-image-o' style='font-size:24px;color:#337ab7;'></i></a>");
			} else {
				$('#modal-fileurl').text('-');
			}

			$('#detailModal').show();
		}

		function closeDetailModal() {
			$('#detailModal').hide();
		}

		$(document).on('click', '#detailModal', function(e) {
			if (e.target.id === 'detailModal') {
				closeDetailModal();
			}
		});

	 </script>
    <!-- 참고  -->
    <!-- https://demo.tutorialzine.com/2016/06/freebie-landing-page-template-with-flexbox   -->
	<!-- https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_carousel&stacked=h -->
	<!-- https://mobirise.com/bootstrap-carousel/ -->
	<!-- https://didqk.tistory.com/34  -->
	
    <!-- 페이지 header  -->
	<header>
		<h2><a href="#">
		     <!-- SAPPT Research 회사로고 -->
		     <img height="60" width="200" src="assets/img/sappt01.png" alt="샤프트리서치 로고">
		    </a>
		</h2>
		<nav>
			<li><a href="#">홈</a></li>
			<li><a href="#">설립목적</a></li>
			<li><a href="#">찾아오시는길</a></li>
		</nav>
	</header> 

    <!-- 메인화면 background-image  -->
	<section class="hero">
	    <!-- 배경이미지 양지사무실 500kb 이미지  적용 -->
		<div class="background-image" style="background-image: url(assets/img/20241114_080206644_w1920_500k.jpg);"></div>
		</div>
		<h1>지속가능한 농업과 식물보호기술</h1>
		<h3>농업기술의 미래</h3>
	</section>
	
    <!-- 이미지목록  -->
	<section class="our-work">
		<ul class="grid">
		     <!-- 1.jpg -->
			<li class="small" style="background-image: url(assets/img/1_02.jpg);"></li>
		     <!-- 2.jpg -->
			<li class="small" style="background-image: url(assets/img/2_02.jpg);"></li>
            <!-- 3.jpg -->
			<li class="small" style="background-image: url(assets/img/3_02.jpg);"></li>
		     <!-- 4.jpg -->
			<li class="large" style="background-image: url(assets/img/4_02.jpg);"></li>
		     <!-- 5.jpg -->
			<li class="large" style="background-image: url(assets/img/5_02.jpg);"></li>
		     <!-- 6.jpg -->
			<li class="small" style="background-image: url(assets/img/6_02.jpg);"></li>
		</div>
	</section>
	


    <!-- 인사말 -->	
	<section class="features">
		<h3 class="title">설립목적</h3>
		<p>기후변화로 한층 복잡해진 병해충 발생양상과 작물보호제 사용에 따른 안전성 문제를 해결하기 위해 데이터 분석 기술과 접목된  전문적인 식물보호 기술 개발로 안전하고 신뢰있는 농산물 생산에 기여하고자 연구소를 설립하였습니다.</p>
		<p>항상 최선을 다하고 정직한 마음으로 시험을 수행할 것이며, 전문적인 지식과 기능을 갖춘 전문 인력 양성 및 지속가능한 농업 발전에 도움이 되도록 하겠습니다.</p>
	</section>
	
    <!-- 게시판 -->
	<section class="board" style="padding-top:50px; padding-bottom:30px;">
		<h3 class="title">식물 병충해 도감</h3>
		<div style="margin-bottom:10px; text-align:right;">
			<span style="position:relative; display:inline-block;">
				<input type="text" id="gridSearch" placeholder="검색어를 입력하세요" style="padding:8px 35px 8px 12px; width:250px; border:1px solid #ccc; border-radius:4px; font-size:14px;">
				<i class="fa fa-search" style="position:absolute; right:12px; top:50%; transform:translateY(-50%); color:#999;"></i>
			</span>
		</div>
		<div class="gridContainer"  id="gridContainer"  style="width:100%;">
			<table id="jqGrid"      style="width:100%;" ></table>
			<div   id="jqGridPager" style="width:100%;" ></div>
		</div>
	</section>

	<!-- 워드클라우드 -->
	<section class="board" style="padding-top:30px;">
		<h3 class="title">병해충 키워드 분석</h3>
		<div id="wordcloudContainer" style="width:100%; height:400px; background:#f9f9f9; border-radius:8px; position:relative;">
			<canvas id="wordcloudCanvas"></canvas>
		</div>
	</section>


    <!-- 찾아오시는길 -->
	<section class="reviews">
		<h3 class="title">찾아오시는길</h3>	
                <p>경기 용인시 처인구 양지면 남평로 326번길 28 (17163)</p>
		<hr>
		<div class="mobile_map" style="width: 100%;">
		
		<!-- * 카카오맵 - 지도퍼가기 -->
		<!-- 1. 지도 노드 -->
                <div id="daumRoughmapContainer1730709813138" class="root_daum_roughmap root_daum_roughmap_landing" style="width: 100%;"></div>
		<!--
			2. 설치 스크립트
			* 지도 퍼가기 서비스를 2개 이상 넣을 경우, 설치 스크립트는 하나만 삽입합니다.
		-->
		<script charset="UTF-8" class="daum_roughmap_loader_script" src="https://ssl.daumcdn.net/dmaps/map_js_init/roughmapLoader.js"></script>


		<!-- 3. 실행 스크립트 -->
		<script charset="UTF-8">
			new daum.roughmap.Lander({
		                "timestamp" : "1730709813138","key" : "2m56e",
				//"mapWidth" : "640",
				"mapHeight" : "360"
			}).render();
		</script>

		<!-- 4. 상호명칭변경 -->
		<script>
			setTimeout(function() {
				// 클래스 이름으로 요소를 선택하고 내용 변경
				const element = document.querySelector('.roughmap_lebel_text');
				if (element) {
					element.textContent = '샤프트리서치';
				} else {
					console.log('원하는 요소를 찾을 수 없습니다.');
				}
			}, 500); // 0.5초 후에 실행
		  </script>
		</div><!--.mobile_map -->
	</section>

	<!-- 상세보기 모달창 -->
	<div id="detailModal" style="display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5);">
		<div style="background-color:#fff; margin:10% auto; padding:20px; border-radius:8px; width:90%; max-width:600px; max-height:70vh; overflow-y:auto; box-shadow:0 4px 20px rgba(0,0,0,0.3);">
			<div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #337ab7; padding-bottom:10px; margin-bottom:15px;">
				<h3 style="margin:0; color:#337ab7;">병해충 상세정보</h3>
				<button onclick="closeDetailModal()" style="background:none; border:none; font-size:24px; cursor:pointer; color:#999;">&times;</button>
			</div>
			<table style="width:100%; border-collapse:collapse;">
				<tr style="border-bottom:1px solid #eee;">
					<th style="text-align:left; padding:10px; width:100px; background-color:#f5f5f5; color:#555;">병명</th>
					<td id="modal-title" style="padding:10px; font-weight:bold;"></td>
				</tr>
				<tr style="border-bottom:1px solid #eee;">
					<th style="text-align:left; padding:10px; width:100px; background-color:#f5f5f5; color:#555;">분류</th>
					<td id="modal-category" style="padding:10px;"></td>
				</tr>
				<tr style="border-bottom:1px solid #eee;">
					<th style="text-align:left; padding:10px; width:100px; background-color:#f5f5f5; color:#555; vertical-align:top;">설명</th>
					<td id="modal-summary" style="padding:10px; line-height:1.6; white-space:pre-wrap;"></td>
				</tr>
				<tr>
					<th style="text-align:left; padding:10px; width:100px; background-color:#f5f5f5; color:#555;">문서</th>
					<td id="modal-fileurl" style="padding:10px; word-break:break-all;"></td>
				</tr>
			</table>
		</div>
	</div>

	<!-- 페이지 footer -->
	<footer>
		<ul>
		     <!-- SAPPT  회사로고 -->
		     <img height="60" width="200" src="assets/img/sappt.png" alt="샤프트리서치 로고">
		</ul>
		<p>샤프트리서치 | 김대호</p>
		<p>경기 용인시 처인구 양지면 남평로 326번길 28 (17163)</p>
		<p>tel : 031-336-3973  |  fax : 031-336-3972  |  sappt@sappt.co.kr</p>
	</footer>

</body>
</html>
